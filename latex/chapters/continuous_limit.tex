The only thing left to prove now is that as $L \rightarrow \infty$, \cref{prob:min-q} does indeed converge towards \cref{prob:cont-least-action}.

\input{figures/figure_convergence_sketch}

This is equation 1.12 from \cite{owhadi20}.
See how this fits here
\begin{equation}
	\label{eq:phi-v-differential-equation}
	\dot{\Phi}^v(x, t) = \mathbf{\Gamma}(\Phi^v(x, t), q) p
\end{equation}

\begin{problem}
	\label{prob:resnet-limit}
	\begin{cases}
		\text{Minimize~}& \frac{\nu}{2} \int_{0}^{1} \norm{v}_\mathcal{V}^2 \mathrm{d}t
		+ l(\phi_v(X, 1), Y)\\
		\text{such that~}& v \in C([0, 1], \mathcal{V})\\
	\end{cases}
\end{problem}

\begin{theorem}
	\label{theo:v-q-continuous-problem-equivalence}
	$v$ minimizes \cref{prob:resnet-limit} if and only if $v$ fulfills
	\begin{equation}
			\dot{\Phi}^v(x, t) = \mathbf{\Gamma}(\Phi^v(x, t), q_t) \bGamma(q_t, q_t)^{-1} \dot{q}_t
	\end{equation}
	such that $\Phi(x, 0) = x$ for all $x \in X$ and $q$ minimizes \cref{prob:cont-least-action}.
\end{theorem}
The proof of this theorem is similar to that of \cref{theo:v-q-problem-equivalence}.
\begin{proof}
	TBD... Seems like we can just reconstruct the proof of the other theorem with some extra steps.
\end{proof}


\subsubsection{Existence of Minimizers}

We already saw the equivalence of \cref{prob:cont-least-action,prob:geodesic-shooting,prob:resnet-limit}, in the sense that their minimizers bijectively correspond to each other -- if they exist.
Now we will show that there do indeed exist such minimizers and also that the problems' minimal values are identical.
\begin{theorem}[Existence for the continuous problems]
		There exist minimal points for \cref{prob:cont-least-action,prob:geodesic-shooting,prob:resnet-limit} and their minimal values are identical.
\end{theorem}

\Todo{Check with paper again. In the paper the equation for p might be wrong...}
\begin{equation}
	\label{eq:discrete-hamiltonian-system}
	\begin{split}
		q_{k+1} &= q_k + \Delta t \bGamma(q_k, q_k) p_k\\
		p_{k+1} &= p_k + \frac{\Delta t}{2} \grad_q{k} \left(p_k^\T \bGamma(q_k, q_k) p_k\right)\ .
	\end{split}
\end{equation}

\begin{problem}
	\label{prob:discrete-least-action}
	\begin{cases}
		\text{Minimize~} & \frac{\nu}{2} \sum_{k=1}^L p_k^\T \bGamma(q_k, q_k) p_k \Delta t + l(q_{L+1}, Y)\\
		\text{such that~} & p_k = \bGamma(q_k, q_k)^{-1} \frac{q_{k+1} - q_k}{\Delta t},\ q_1 = X \\
		&\text{~and~} (q_k, p_k) \text{~follow the discrete Hamiltonian equations \ref{eq:discrete-hamiltonian-system}}\ .
	\end{cases}
\end{problem}

\begin{theorem}[Existence of solutions to the discrete problems]
	There exist minimal points for \cref{prob:discrete-least-action,prob:min-v-f,prob:min-q} and their minimal values are identical.
\end{theorem}


\subsubsection{Convergence}

The following theorem is quite a big one.
It states convergence results for all three discrete problems we have dealt with so far.
\begin{theorem}[Convergence theorem]
	\label{theo:problem-convergence}
	content...
\end{theorem}